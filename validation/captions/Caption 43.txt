(A) The diamond sample is stressed by shock waves driven by optical laser irradiation. In situ x-ray radiography is measured by using a femtosecond XFEL pulse, irradiating the sample perpendicular to the propagation axis of the shock waves. A lithium fluoride (LiF) crystal is placed at the XFEL downstream to collect the spatial intensity distribution of the transmitted x-rays. (B) A representative image that we captured by using the LiF crystal to visualize the elastic-plastic shock wavefronts propagating along the shock direction. Behind the plastic wavefront, stacking faults appear as dark and light bands, indicating the existence of partial dislocations that travel with the plastic shock wavefront (magenta arrow). The yellow dotted line serves to guide the eyes to the radiation.